{% extends "base.html" %}
{% block content %}

<div class="row">
    <div class="col s12 m8 offset-m2">
        <div class="card-panel">
            <h3 class="center-align grey-text text-darken-2">
                {{ username }}'s Profile
            </h3>
        </div>
    </div>
</div>
<div class="row">
    <ul class="collapsible">  
        <!-- Here you have an object called poems. You are making a for loop and calling each iteration 'poem'. You can then access the individual properties of a poem (which is itself a document in your DB) -->
        {% for poem in poems %}
        <li>
            <div class="row collapsible-header amber lighten-3 lighten-5 grey-text text-darken-2">
                <div class="col s7 m9 ">
                    <p class="poem-title"><strong><i class="fa-solid fa-angle-down"></i> {{ poem.title }}</strong></p>
                </div>
                <div class="col s5 m3">
                    <a href="{{ url_for('update_poem', poems_id=poem._id) }}" class="btn-small amber lighten-3 lighten-5 grey-text text-darken-2">UPDATE</a>
                    <a href="{{ url_for('delete_poem', poems_id=poem._id) }}" class="btn-small amber lighten-3 lighten-5 grey-text text-darken-2">DELETE</a>
                </div>
            </div>
            <div class="collapsible-body amber lighten-4 lighten-5 grey-text text-darken-2">
                <p class="poem-additional-info">Category: {{ poem.category }}</p><br>        
                <!-- poem.content is a field in an individual poem. Use the splitlines() method to break this field up on each new line.
                Let's call each iteration of this a 'line' to make better sense of it when making the for loop. -->
                   
                {% for line in poem.content.splitlines() %}           
                <!-- Each 'line' is just that, a line from the poem.content field in the document. -->
                       
                <p class="poem-content">{{ line }}</p>
                {% endfor %}
                <br>
                <p class="poem-additional-info">Created By: {{ poem.created_by }}</p>
                <p class="poem-additional-info">Gender: {{ poem.gender }}</p>
                <p class="poem-additional-info">Created On: {{ poem.created_on }}<br></p>
                <p class="poem-additional-info">Created In: {{ poem.location }}</p>
            </div>
            <!-- View specific poem separately -->
            <div class="collapsible-body amber lighten-4 lighten-5 grey-text text-darken-2">
                <h6><a class="" href="{{ url_for('read_poem', poems_id=poem._id) }}">View Poem</a></h6>

            </div>
        </li>
        {% endfor %}
    </ul>
</div>



{% endblock%}